<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marked</title>
    <link rel="stylesheet" href="styles/notes.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@codemirror/view@6/dist/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@codemirror/theme-one-dark@6/dist/theme.css">
    <style>
        /* Specific button hover colors for undo/redo */
        #undoButton:hover {
            background-color: rgba(103, 58, 183, 0.15);
            color: #673ab7;
        }

        #redoButton:hover {
            background-color: rgba(103, 58, 183, 0.15);
            color: #673ab7;
        }

        /* Disabled state for undo/redo buttons */
        #undoButton:disabled,
        #redoButton:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none !important;
        }

        #undoButton:disabled:hover,
        #redoButton:disabled:hover {
            background-color: transparent !important;
            color: var(--text-color) !important;
            transform: none !important;
            box-shadow: none !important;
        }
    </style>
</head>

<body>
    <header class="app-header">
        <div class="header-left">
            <h1><b>Marked</b></h1>
            <p>Simplified markdown note-taking.</p>
        </div>

        <div class="header-center">
            <!-- Move the toolbar to the header -->
            <div class="editor-toolbar">
                <button id="undoButton" data-tooltip="Undo">â†¶</button>
                <button id="redoButton" data-tooltip="Redo">â†·</button>
                <button id="saveButton" data-tooltip="Save">ğŸ’¾</button>
                <button id="deleteButton" data-tooltip="Delete Note">ğŸ—‘ï¸</button>
                <button id="clearButton" data-tooltip="Clear Note">ğŸ§¹</button>
                <button id="txtButton" data-tooltip="Export as TXT">ğŸ“„</button>
                <button id="mdButton" data-tooltip="Export as MD">ğŸ“</button>
                <button id="openFileButton" data-tooltip="Open File">ğŸ“‚</button>
            </div>
        </div>

        <div class="header-right">
            <button id="darkModeToggle" class="dark-mode-btn" data-tooltip="Toggle Dark/Light Mode">ğŸŒ™</button>
        </div>
    </header>

    <main class="app-container">
        <aside class="notes-sidebar">
            <input type="text" id="searchInput" placeholder="ğŸ” Search notes..." />
            <button id="newNoteButton">ğŸ“ New Note</button>
            <div id="notesList"></div>
        </aside>

        <section class="note-editor">
            <!-- Title row with inline toggle button -->
            <div class="title-row">
                <input type="text" id="noteTitle" placeholder="ğŸ“„ Enter note title (optional)" />
                <button id="modeToggleButton" class="mode-toggle-button" data-tooltip="Preview/Edit">ğŸ‘ï¸</button>
            </div>

            <div id="markdownEditor" class="markdown-editor-container"></div>

            <!-- Hidden file input for opening .md or .txt files -->
            <input type="file" id="fileInput" accept=".txt,.md" style="display: none;" />

            <div id="renderedNote" class="rendered-note" style="display: none;"></div>
            <div id="noteTimestamp" class="note-timestamp"></div>
        </section>
    </main>

    <!-- CodeMirror JavaScript -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/@codemirror/state@6/dist/index.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@codemirror/view@6/dist/index.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@codemirror/basic-setup@0.20.0/dist/index.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@codemirror/lang-markdown@6/dist/index.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@codemirror/theme-one-dark@6/dist/theme.js"></script>

    <script src="scripts/notes.js"></script>
</body>

</html>
